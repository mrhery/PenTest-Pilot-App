using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using Xamarin.Forms;
using Xamarin.Forms.Xaml;

namespace PenTestTool
{
    [XamlCompilation(XamlCompilationOptions.Compile)]
    public partial class FlyoutMenuPage : ContentPage
    {
        public FlyoutMenuPage()
        {
            InitializeComponent();
            Title = "Mail Tester";

            List<MenuItem> menuItems = new List<MenuItem>
            {
                new MenuItem
                {
                    title = "Dashboard"
                },
                new MenuItem
                {
                    title = "DDoS Attack"
                },
                new MenuItem
                {
                    title = "Port Scanner"
                },
                new MenuItem
                {
                    title = "DNS Enum"
                },
                new MenuItem
                {
                    title = "Directory Buster"
                },
                new MenuItem
                {
                    title = "Password Brute-Force"
                },
                new MenuItem
                {
                    title = "SMTP Fuzz"
                }
            };

            list_menu_item.ItemsSource = menuItems;

            list_menu_item.ItemSelected += List_menu_item_ItemSelected;
        }

        private void List_menu_item_ItemSelected(object sender, SelectedItemChangedEventArgs e)
        {

            if(e.SelectedItem == null)
            {
                return;
            }

            var item = e.SelectedItem as MenuItem;
            var currentFlyout = App.Current.MainPage as FlyoutPage;
            currentFlyout.IsPresented = false;

            switch (item.title)
            {
                case "DDoS Attack":
                    currentFlyout.Detail = new NavigationPage(new Pages.DDoSAttack());
                    break;
                case "Dashboard":
                    currentFlyout.Detail = new NavigationPage(new Pages.Dashboard());
                    break;

                case "Port Scanner":
                    currentFlyout.Detail = new NavigationPage(new Pages.PortScanner());
                    break;

                case "DNS Enum":
                    currentFlyout.Detail = new NavigationPage(new Pages.DNSEnum());
                    break;

                case "Directory Buster":
                    currentFlyout.Detail = new NavigationPage(new Pages.DirBuster());
                    break;

                case "Password Brute-Force":
                    currentFlyout.Detail = new NavigationPage(new Pages.PasswordBrute());
                    break;

                case "SMTP Fuzz":
                    currentFlyout.Detail = new NavigationPage(new Pages.SMTPFuzz());
                    break;
                
            }

            //((ListView)e.SelectedItem).SelectedItem = null;
        }
    }

    class MenuItem
    {
        public string logo { get; set; }
        public string title { get; set; }
    }
}